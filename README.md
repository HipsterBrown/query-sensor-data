# Viam Sensor Querying with Python and Jupyter Notebooks

This is an example project that demonstrates how to query and visualize sensor data from [Viam](https://viam.com) using their [Python SDK](https://python.viam.dev) and [Jupyter Notebooks](https://docs.jupyter.org/en/latest/index.html).

The Python environment and dependencies are managed using [Rye](https://rye-up.com)

## Project Layout

```
src/
    query_sensor_data/
        __init__.py
        __main__.py
notebooks/
    sensor_queries-csv.ipynb
    sensor_queries-live.ipynb
    sensor_queries.ipynb
data/
    data/
        data.ndjson
    metadata/
        0.json
    data.csv
pyproject.toml
requirements*
.env.example
```

The `query_sensor_data` Python module under the `src/` directory shows how to use the Viam Python SDK outside of a Notebook, including commented-out experiemnts to query data using SDK until that is official supported in the next release.

The `notebooks/` directory contains the various example Notebooks for querying the Viam data service (`sensor_queries.ipynb`), visualizing an export of data from a CSV (`sensor_queries-csv.ipynb`), and attempts to display a live-updating visualization of sensor readings directly from the device (`sensor_queries-live.ipynb`).

The `data/` directory contains the export from the example project of movement data, including a formatted CSV generated from the source `data.ndjson` file.

`pyproject.toml` contains the project configuration.

The `requirements.lock` and `requirement-dev.lock` files are [lockfiles](https://rye-up.com/guide/sync/) generated by Rye to ensure consistent resolution of dependencies installed by this project.

`.env.example` should be copied as `.env` and filled out with the expected credentials for connecting to Viam. [See the docs for more info](https://docs.viam.com/build/program/apis/data-client/#establish-a-connection)

## Development

While this project layout will work with `pip` and `venv`, installing and using [Rye](https://rye-up.com/) will be a much smoother experience.

Once `rye` has been installed, run `rye sync` in the project directory to create the virtual environment and install all dependencies.

`rye run query` will execute the `query_sensor_data` module using the environment variables from the `.env` file.

`rye run start-notebook` will start the Jupyter Notebook environment.
